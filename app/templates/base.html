<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MusicHub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .discord-btn.primary {
            background-color: #5865F2 !important;
            color: white !important;
            transition: all 0.2s ease;
            border: none;
        }
        .discord-btn.primary:hover {
            background-color: #4752C4 !important;
            transform: translateY(-1px);
        }
        .discord-btn.primary:active {
            background-color: #3C45A5 !important;
            transform: translateY(0);
        }
    </style>
</head>
<body class="discord-theme">
    <header class="main-header">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="d-flex align-items-center ps-4">
                        <h1 class="site-title mb-0">MusicHub</h1>
                    </div>
                </div>
                <div class="col-md-6 text-end pe-5">
                    {% if current_user.is_authenticated %}
                        <a href="{{ url_for('profile') }}" class="auth-btn login-btn">–ü—Ä–æ—Ñ–∏–ª—å</a>
                        <a href="{{ url_for('logout') }}" class="auth-btn register-btn">–í—ã–π—Ç–∏</a>
                    {% else %}
                        <a href="{{ url_for('login') }}" class="auth-btn login-btn">–í–æ–π—Ç–∏</a>
                        <a href="{{ url_for('register') }}" class="auth-btn register-btn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </header>

    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-2 sidebar">
                <div class="sidebar-header p-3">
                    <h3 class="text-white">üéµ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
                </div>
                <div class="filters-section p-3">
                    <h4 class="text-white mb-3">–ñ–∞–Ω—Ä—ã</h4>
                    <ul class="nav flex-column">
                        <li class="nav-item channel"><span class="nav-link">üé∏ –†–æ–∫</span></li>
                        <li class="nav-item channel"><span class="nav-link">üéπ –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞</span></li>
                        <li class="nav-item channel"><span class="nav-link">üéª –ö–ª–∞—Å—Å–∏–∫–∞</span></li>
                        <li class="nav-item channel"><span class="nav-link">üé§ –ü–æ–ø</span></li>
                    </ul>
                </div>
                <div class="filters-section p-3">
                    <h4 class="text-white mb-3">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</h4>
                    <ul class="nav flex-column">
                        <li class="nav-item channel"><span class="nav-link">üé∏ –ì–∏—Ç–∞—Ä–∞</span></li>
                        <li class="nav-item channel"><span class="nav-link">üéπ –ü–∏–∞–Ω–∏–Ω–æ</span></li>
                        <li class="nav-item channel"><span class="nav-link">ü•Å –ë–∞—Ä–∞–±–∞–Ω—ã</span></li>
                        <li class="nav-item channel"><span class="nav-link">üé∑ –°–∞–∫—Å–æ—Ñ–æ–Ω</span></li>
                    </ul>
                </div>
                <div class="filters-section p-3">
                    <h4 class="text-white mb-3">–§–∏–ª—å—Ç—Ä—ã</h4>
                    <div class="form-check text-white">
                        <input class="form-check-input" type="checkbox" id="new">
                        <label class="form-check-label" for="new">–ù–æ–≤—ã–µ</label>
                    </div>
                    <div class="form-check text-white">
                        <input class="form-check-input" type="checkbox" id="popular">
                        <label class="form-check-label" for="popular">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ</label>
                    </div>
                    <div class="form-check text-white">
                        <input class="form-check-input" type="checkbox" id="lessons">
                        <label class="form-check-label" for="lessons">–£—Ä–æ–∫–∏</label>
                    </div>
                </div>
                <div class="filters-section p-3">
                    <h4 class="text-white mb-3">–û–ø—ã—Ç</h4>
                    <div class="form-check text-white">
                        <input class="form-check-input" type="radio" name="experience" id="beginner">
                        <label class="form-check-label" for="beginner">–ù–∞—á–∏–Ω–∞—é—â–∏–π</label>
                    </div>
                    <div class="form-check text-white">
                        <input class="form-check-input" type="radio" name="experience" id="pro">
                        <label class="form-check-label" for="pro">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª</label>
                    </div>
                </div>
            </nav>

            <div class="col-md-10 main-content">
                {% if current_user.is_authenticated %}
                    <div class="search-create-container py-4">
                        <div class="d-flex align-items-center gap-3">
                            <input type="text" class="form-control discord-search" placeholder="–ù–∞–π—Ç–∏ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é...">
                            <a href="{{ url_for('create_post') }}" class="btn discord-btn primary">–ù–æ–≤–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è</a>
                        </div>
                    </div>

                    <!-- –í–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ —Å –ø–æ—Å—Ç–∞–º–∏ -->
                    <div class="posts-container p-4">
                        {% if posts %}
                            <div class="posts-grid">
                                {% for post in posts %}
                                    <div class="post-card">
                                        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
                                        <div class="post-header">
                                            <div class="post-meta">
                                                <span class="post-author">{{ post.author.username }}</span>
                                                <span class="post-date">{{ post.created_at|timeago }}</span>
                                            </div>
                                            <h2 class="post-title">{{ post.title }}</h2>
                                        </div>

                                        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
                                        <div class="post-content">
                                            {{ post.content|safe }}
                                            <div class="post-media">
                                                {% if post.file_path %}
                                                    {% if post.file_path.lower().endswith(('.png', '.jpg', '.jpeg', '.gif')) %}
                                                        <img src="{{ url_for('static', filename=post.file_path) }}"
                                                            class="post-image"
                                                            alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
                                                    {% elif post.file_path.lower().endswith(('.mp3', '.wav', '.ogg')) %}
                                                        <audio controls class="post-audio">
                                                            <source src="{{ url_for('static', filename=post.file_path) }}">
                                                        </audio>
                                                    {% endif %}
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                {% else %}
                    <div class="welcome-header text-center py-5">
                        <h2 class="welcome-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ MusicHub</h2>
                        <p class="welcome-subtitle">–í–∞—à–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å–∫–æ–≥–æ —Å–∞–º–æ–≤—ã—Ä–∞–∂–µ–Ω–∏—è</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</body>
</html>